---
import { siteConfig } from '@/site-config';
import type { SiteMeta } from '@/types';
import BaseHead from '@/components/base-head.astro';
import ThemeProvider from '@/components/theme-provider.astro';
import SkipLink from '@/components/skip-link.astro';
import Header from '@/components/layout/header.astro';
import Footer from '@/components/layout/footer.astro';

interface Props {
  meta: SiteMeta;
}

const {
  meta: {
    articleDate,
    description = siteConfig.description,
    ogImage,
    title,
    canonical,
  },
} = Astro.props as Props;

// Create a clean meta object for BaseHead that properly handles undefined values
const _baseHeadMeta: SiteMeta = {
  title,
  description,
  ...(articleDate && { articleDate }),
  ...(ogImage && { ogImage }),
  ...(canonical && { canonical }),
};
---

<html lang={siteConfig.lang}>
  <head>
    <BaseHead
      {..._baseHeadMeta}
    />
  </head>
  <body>
    <ThemeProvider />
    <SkipLink />
    <Header />
    <main id="main">
      <slot />
    </main>
    <Footer />
  </body>
</html>
