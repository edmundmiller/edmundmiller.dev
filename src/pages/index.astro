---
import { getAllPosts, sortMDByDate } from '@/data/post';
import PageLayout from '@/layouts/base.astro';
import SocialList from '@/components/social-list.astro';
import PostPreview from '@/components/blog/post-preview.astro';
import Openring from '@/components/openring.astro';

const MAX_POSTS = 10;
const allPosts = await getAllPosts();
const _allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);

/* Tech stack info (unused for now)
const cactusTech: { desc: string; href: string; title: string }[] = [
  {
    desc: 'Build fast websites, faster.',
    href: 'https://astro.build',
    title: 'Astro',
  },
  {
    desc: 'Rapidly build modern websites without ever leaving your HTML.',
    href: 'https://tailwindcss.com',
    title: 'Tailwind CSS',
  },
  {
    desc: 'Simple and easy-to-use markup language.',
    href: 'https://www.markdownguide.org/',
    title: 'Markdown',
  },
  {
    desc: 'Markdown for the component era.',
    href: 'https://mdxjs.com/',
    title: 'MDX',
  },
  {
    desc: 'Generating png Open Graph images for blog posts.',
    href: 'https://github.com/vercel/satori',
    title: 'Satori',
  },
  {
    desc: 'A fully static search library.',
    href: 'https://pagefind.app/',
    title: 'Pagefind',
  },
  {
    desc: 'An easy to use Icon component for Astro.',
    href: 'https://github.com/natemoo-re/astro-icon#readme',
    title: 'Astro Icon',
  },
  {
    desc: 'Highly customisable source code & syntax highlighter',
    href: 'https://expressive-code.com/',
    title: 'Expressive Code',
  },
];
*/
---

<PageLayout meta={{ title: "Home" }}>
  <section>
    <h1 class="title mb-6">Hello!</h1>
    <p class="mb-4">
      I'm <a href="https://edmundmiller.dev/" class="h-card" rel="me">Edmund Miller</a>, a PhD
      candidate with a broad range of interests, primarily in Functional Genomics. I got into
      bioinformatics after realizing I didn't have golden hands at the bench during undergrad.
    </p>
    <p class="mb-4">
      That taste of programming got me dabbling in writing smart contracts and web apps. Through my
      research experience I acquired a taste for processing data with reproducible, high-throughput
      workflows.
    </p>
    <p class="mb-6">
      I saw the light in March 2020 when I found <a href="https://nf-co.re/">nf-core</a> and tossed
      aside the reptilian workflow manager for <a href="https://www.nextflow.io/">Nextflow</a>. I love
      a good crossover episode of technologies and I'm always trying to push the envelope.
    </p>
    <SocialList />
  </section>
  <section aria-label="Blog post list" class="mt-16">
    <h2 class="h-feed title mb-4 text-xl">Posts</h2>
    <ul class="space-y-4">
      {
        _allPostsByDate.map((p) => (
            <li class="flex flex-col gap-x-2 sm:flex-row">
              <PostPreview post={p} withDesc />
            </li>
        ))
      }
    </ul>
  </section>
  <section class="mt-16"></section>
  <Openring />
</PageLayout>
